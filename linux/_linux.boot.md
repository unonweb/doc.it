
- Brave New Trusted Boot World
  https://0pointer.net/blog/brave-new-trusted-boot-world.html
- Linux Boot Partitions
  https://0pointer.net/blog/linux-boot-partitions.html
- Authenticated Boot and Disk Encryption on Linux
  https://0pointer.net/blog/authenticated-boot-and-disk-encryption-on-linux.html
- Unlocking LUKS2 volumes with TPM2, FIDO2, PKCS#11 Security Hardware on systemd 248
  https://0pointer.net/blog/unlocking-luks2-volumes-with-tpm2-fido2-pkcs11-security-hardware-on-systemd-248.html
- Authenticated Boot and Disk Encryption on Linux
  https://0pointer.net/blog/authenticated-boot-and-disk-encryption-on-linux.html



# Glossary
## TPM

_Trusted Platform Module_; a security chip found in many modern systems, both physical systems and increasingly also in virtualized environments. Traditionally a discrete chip on the mainboard but today often implemented in firmware, and lately directly in the CPU SoC.

## PCR

_Platform Configuration Register_; a set of registers on a TPM that are initialized to zero at boot. The firmware and OS can “_extend_” these registers with hashes of data used during the boot process and afterwards. “Extension” means the supplied data is first cryptographically hashed. The resulting hash value is then combined with the previous value of the PCR and the combination hashed again. The result will become the new value of the PCR. By doing this iteratively for all parts of the boot process (always with the data that will be used next during the boot process) a concept of “_Measured Boot_” can be implemented: as long as every element in the boot chain measures (i.e. extends into the PCR) the next part of the boot like this, the resulting PCR values will prove cryptographically that only a certain set of boot components can have been used to boot up. A standards compliant TPM usually has 24 PCRs, but more than half of those are already assigned specific meanings by the firmware. Some of the others may be used by the OS, of which we use four in the concepts discussed in this document.

## Measurement

The act of “_extending_” a PCR with some data object.
## SRK

_Storage Root Key_; a special cryptographic key generated by a TPM that never leaves the TPM, and can be used to encrypt/decrypt data passed to the TPM.

## UKI

_Unified Kernel Image_; the concept this document is about. A combination of kernel, `initrd` and other resources. See above.

## SecureBoot

A mechanism where every software component involved in the boot process is cryptographically signed and checked against a set of public keys stored in the mainboard hardware, implemented in firmware, before it is used.

## Measured Boot

A boot process where each component measures (i.e., hashes and extends into a TPM PCR, see above) the next component it will pass control to before doing so. This serves two purposes: it can be used to bind security policy for encrypted secrets to the resulting PCR values (or signatures thereof, see above), and it can be used to reason about used software after the fact, for example for the purpose of remote attestation.

## initrd

Short for “_initial RAM disk_”, which – strictly speaking – is a misnomer today, because no RAM disk is anymore involved, but a `tmpfs` file system instance. Also known as “`initramfs`”, which is also misleading, given the file system is not `ramfs` anymore, but `tmpfs` (both of which are in-memory file systems on Linux, with different semantics). The `initrd` is passed to the Linux kernel and is basically a file system tree in `cpio` archive. The kernel unpacks the image into a `tmpfs` (i.e., into an in-memory file system), and then executes a binary from it. It thus contains the binaries for the first userspace code the kernel invokes. Typically, the `initrd`’s job is to find the actual root file system, unlock it (if encrypted), and transition into it.

## UEFI

Short for “_Unified Extensible Firmware Interface_”, it is a widely adopted standard for PC firmware, with native support for _SecureBoot_ and Measured Boot.

## EFI

More or less synonymous to UEFI, IRL.

## Shim

A boot component originating in the Linux world, which in a way extends the public key database SecureBoot maintains (which is under control from Microsoft) with a second layer (which is under control of the Linux distributions and of the owner of the physical device).

## PE

_Portable Executable_; a file format for executable binaries, originally from the Windows world, but also used by UEFI firmware. PE files may contain code and data, categorized in labeled “sections”

## ESP

_EFI System Partition_; a special partition on a storage medium that the firmware is able to look for UEFI PE binaries in to execute at boot.

## HSM

_Hardware Security Module_; a piece of hardware that can generate and store secret cryptographic keys, and execute operations with them, without the keys leaving the hardware (though this is configurable). TPMs can act as HSMs.

## DEK

_Disk Encryption Key_; an asymmetric cryptographic key used for unlocking disk encryption, i.e. passed to LUKS/dm-crypt for activating an encrypted storage volume.

## LUKS2

_Linux Unified Key Setup Version 2_; a specification for a superblock for encrypted volumes widely used on Linux. LUKS2 is the default on-disk format for the `cryptsetup` suite of tools. It provides flexible key management with multiple independent key slots and allows embedding arbitrary metadata in a JSON format in the superblock.